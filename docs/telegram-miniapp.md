# Telegram Mini App — запуск и проверка

Этот гид объясняет, как посмотреть мини-приложение двумя способами: локально в браузере и внутри Telegram WebApp.

## 1. Локальный предпросмотр в Next.js

1. Выполните стандартный запуск проекта (см. «Запуск локально» в README).
2. После старта фронтенда откройте [http://localhost:3000/miniapp](http://localhost:3000/miniapp).
3. Страница использует тот же стек компонентов, что и основное приложение, и подстраивается под мобильное окно Telegram.
4. Данные загружаются из API (`NEXT_PUBLIC_API_BASE_URL`). Для полного потока убедитесь, что API и база данных запущены.

## 2. Статический предпросмотр

Если нужно показать только визуал без запуска проекта:

1. Откройте файл `docs/miniapp-preview.html` в браузере.
2. Этот файл не требует сборки и демонстрирует основные экраны мини-приложения в стилистике liquid glass.

## 3. Запуск внутри Telegram

Чтобы протестировать мини-приложение в реальном окружении Telegram WebApp:

1. Разместите фронтенд на внешнем HTTPS-домене (или воспользуйтесь ngrok/Cloudflared для туннеля к `http://localhost:3000`).
2. Убедитесь, что переменная `NEXT_PUBLIC_API_BASE_URL` указывает на доступный снаружи адрес API (по HTTPS).
3. Создайте или отредактируйте бота в BotFather:
   - Команда `/newbot` или `/setdomain`/`/setmenubutton` для существующего бота.
   - Укажите URL WebApp: `https://<ваш-домен>/miniapp`.
4. В коде бота (NestJS или другой сервер) убедитесь, что проверяется подпись `initData`, полученная в WebApp.
5. Откройте бот в Telegram, нажмите на WebApp-кнопку — загрузится страница `/miniapp` уже внутри Telegram.

### Диагностика

- Если страница не загружается, проверьте HTTPS-сертификат и корректность публичного URL.
- Для локальной отладки с ngrok убедитесь, что домен совпадает с тем, что настроен в BotFather.
- В консоли разработчика WebApp (`tg://debug`) можно увидеть логи и возможные ошибки авторизации initData.

Такой процесс позволит проверить как визуальную часть мини-приложения, так и его интеграцию с Telegram API.
